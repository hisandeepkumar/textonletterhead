<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Myrtille Industries - Text to PDF Generator</title>
  <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { 
      background: linear-gradient(135deg, #1a2a3a, #2c3e50);
      font-family: 'Poppins', sans-serif; 
      min-height: 100vh; 
      display: flex; 
      justify-content: center; 
      align-items: center; 
      padding: 20px;
    }
    .container { max-width: 1000px; width: 100%; }
    .app-card { 
      background: rgba(255, 255, 255, 0.97); 
      border-radius: 15px; 
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.35); 
      overflow: hidden; 
    }
    .app-header { 
      background: linear-gradient(90deg, #2c3e50, #3498db); 
      color: white; 
      padding: 25px; 
      text-align: center; 
      position: relative;
      overflow: hidden;
    }
    .app-header::before {
      content: "";
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0) 70%);
      transform: rotate(30deg);
    }
    .app-header h1 { font-size: 32px; font-weight: 700; position: relative; }
    .app-header p { font-size: 18px; opacity: 0.9; position: relative; margin-top: 10px; }
    .app-content { padding: 35px; }
    .app-section { margin-bottom: 35px; }
    .section-title { 
      display: flex; 
      align-items: center; 
      margin-bottom: 20px; 
      color: #2c3e50; 
      position: relative;
      padding-left: 15px;
    }
    .section-title::before {
      content: "";
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      width: 5px;
      background: linear-gradient(to bottom, #3498db, #2980b9);
      border-radius: 3px;
    }
    .section-title i { margin-right: 15px; color: #3498db; font-size: 24px; }
    .section-title h2 { font-size: 24px; font-weight: 600; }
    .text-area-container { 
      background: rgba(26, 37, 48, 0.05); 
      border: 2px solid rgba(52, 152, 219, 0.4); 
      border-radius: 12px; 
      padding: 25px; 
      position: relative; 
      transition: all 0.3s ease; 
    }
    .text-area-container:focus-within { 
      border-color: #3498db; 
      box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
    }
    .text-area-container label { 
      display: block; 
      margin-bottom: 15px; 
      color: #2c3e50; 
      font-weight: 500; 
      font-size: 18px;
    }
    .text-area-container textarea {
      width: 100%;
      min-height: 200px;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-family: 'Poppins', sans-serif;
      font-size: 16px;
      resize: vertical;
      transition: all 0.3s;
    }
    .text-area-container textarea:focus {
      outline: none;
      border-color: #3498db;
      box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
    }
    .btn { 
      background: linear-gradient(90deg, #3498db, #2980b9); 
      color: white; 
      border: none; 
      padding: 12px 25px; 
      border-radius: 10px; 
      cursor: pointer; 
      font-size: 16px; 
      transition: all 0.3s; 
      position: relative;
      overflow: hidden;
      z-index: 1;
      font-weight: 500;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    .btn::before {
      content: "";
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
      transition: all 0.6s;
      z-index: -1;
    }
    .btn:hover { 
      transform: translateY(-4px); 
      box-shadow: 0 6px 20px rgba(52, 152, 219, 0.5);
    }
    .btn:hover::before {
      left: 100%;
    }
    .btn:disabled { background: #95a5a6; cursor: not-allowed; transform: none; box-shadow: none; }
    .btn-secondary {
      background: linear-gradient(90deg, #2c3e50, #34495e);
    }
    .action-buttons {
      display: flex;
      gap: 15px;
      margin-top: 15px;
    }
    .preview-container { 
      display: flex; 
      gap: 25px; 
      flex-wrap: wrap; 
      margin-top: 30px;
    }
    .preview-box { 
      flex: 1; 
      min-width: 320px; 
      background: #f8f9fa; 
      border-radius: 12px; 
      overflow: hidden; 
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      transition: transform 0.3s;
    }
    .preview-box:hover {
      transform: translateY(-5px);
    }
    .preview-header { 
      background: linear-gradient(90deg, #3498db, #2980b9); 
      color: white; 
      padding: 15px; 
      display: flex; 
      align-items: center; 
    }
    .preview-header i { margin-right: 15px; font-size: 20px; }
    .preview-header h3 { font-size: 20px; font-weight: 600; }
    .preview-content { padding: 20px; text-align: center; min-height: 400px; }
    .letterhead-preview { 
      background: white; 
      padding: 25px; 
      text-align: left; 
      border: 1px solid #e0e0e0; 
      box-shadow: 0 3px 8px rgba(0,0,0,0.05);
      position: relative;
      height: 100%;
      display: flex;
      flex-direction: column;
    }
    .letterhead-top { 
      background: white; 
      padding: 15px 10px 10px; 
      text-align: center; 
      position: relative;
    }
    .company-name { 
      font-size: 24px; 
      font-weight: 700; 
      color: #2c3e50; 
      text-transform: uppercase;
      letter-spacing: 1.5px;
      margin-bottom: 15px;
    }
    .line-separator {
      height: 2px;
      background: linear-gradient(90deg, transparent, #3498db, transparent);
      width: 90%;
      margin: 0 auto 20px;
    }
    .letterhead-content { 
      flex: 1;
      padding: 25px; 
      color: #555; 
      line-height: 1.7;
      border-top: 1px solid #f0f0f0;
      border-bottom: 1px solid #f0f0f0;
      background: #f9f9f9;
      font-size: 16px;
      white-space: pre-wrap;
      overflow: auto;
      max-height: 250px;
    }
    .letterhead-bottom { 
      display: flex; 
      justify-content: space-between; 
      padding-top: 25px; 
      margin-top: 20px;
      font-size: 15px;
      position: relative;
    }
    .letterhead-bottom::before {
      content: "";
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      height: 2px;
      background: linear-gradient(90deg, transparent, #3498db, transparent);
    }
    .address-section, .contact-section { font-size: 15px; color: #1a5d75; }
    .section-title-line { 
      font-weight: 700; 
      margin-bottom: 8px; 
      color: #2c3e50;
      border-bottom: 1px solid #e0e0e0;
      padding-bottom: 5px;
      font-size: 16px;
    }
    .status-area { 
      display: none; 
      margin-top: 25px; 
      padding: 25px; 
      background: #ecf0f1; 
      border-radius: 12px; 
    }
    .status-area.active { display: block; }
    .status-header { 
      display: flex; 
      align-items: center; 
      margin-bottom: 15px; 
      color: #2c3e50; 
    }
    .status-header i { margin-right: 15px; font-size: 24px; }
    .status-header h3 { font-size: 22px; font-weight: 600; }
    .progress-container { 
      background: #d5dbdd; 
      height: 12px; 
      border-radius: 6px; 
      overflow: hidden; 
      margin: 20px 0;
      box-shadow: inset 0 1px 2px rgba(0,0,0,0.1);
    }
    .progress-bar { 
      height: 100%; 
      width: 0; 
      background: linear-gradient(90deg, #3498db, #2980b9); 
      transition: width 0.4s ease; 
    }
    .status-message { margin-top: 15px; color: #2c3e50; font-size: 18px; }
    .footer { 
      background: #2c3e50; 
      color: white; 
      text-align: center; 
      padding: 20px; 
      font-size: 16px; 
      position: relative;
    }
    .footer::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: linear-gradient(90deg, #3498db, #2980b9);
    }
    @media (max-width: 768px) { 
      .app-content { padding: 25px; } 
      .preview-container { flex-direction: column; }
      .text-area-container { padding: 20px; }
      .letterhead-bottom { flex-direction: column; gap: 20px; }
      .section-title h2 { font-size: 22px; }
      .action-buttons {
        flex-direction: column;
      }
    }
    .success-message {
      display: none;
      background: #27ae60;
      color: white;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
      margin-top: 25px;
      animation: fadeIn 0.5s;
      font-size: 18px;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .error-message {
      display: none;
      background: #e74c3c;
      color: white;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
      margin-top: 25px;
      animation: fadeIn 0.5s;
      font-size: 18px;
    }
    .char-count {
      text-align: right;
      margin-top: 8px;
      font-size: 14px;
      color: #7f8c8d;
    }
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #27ae60;
      color: white;
      padding: 15px 25px;
      border-radius: 8px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      transform: translateX(120%);
      transition: transform 0.3s ease-out;
      z-index: 1000;
    }
    .notification.show {
      transform: translateX(0);
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="app-card">
      <div class="app-header">
        <h1><i class="fas fa-file-contract"></i> Myrtille Industries</h1>
        <p>Professional Text to PDF Generator</p>
      </div>
      
      <div class="app-content">
        <div class="app-section">
          <div class="section-title">
            <i class="fas fa-edit"></i>
            <h2>Create Your Document</h2>
          </div>
          
          <div class="text-area-container">
            <label for="contentInput">Enter your document content:</label>
            <textarea id="contentInput" placeholder="Type or paste your document content here...">Myrtille Industries

Dear Valued Partner,

We are pleased to inform you about our new professional document generation service. This system allows you to create customized PDF documents with our official letterhead.

Simply type or paste your content in this text area and click the "Generate PDF" button. Your document will be created with our professional letterhead and footer.

Thank you for choosing Myrtille Industries.

Sincerely,
The Management Team</textarea>
            <div class="char-count" id="charCount">0 characters</div>
            <div class="action-buttons">
              <button class="btn" id="copyBtn">
                <i class="fas fa-copy"></i> Copy Text
              </button>
              <button class="btn btn-secondary" id="clearBtn">
                <i class="fas fa-eraser"></i> Clear
              </button>
            </div>
          </div>
        </div>
        
        <div class="preview-container">
          <div class="preview-box">
            <div class="preview-header">
              <i class="fas fa-file-signature"></i>
              <h3>Document Preview</h3>
            </div>
            <div class="preview-content">
              <div class="letterhead-preview">
                <div class="letterhead-top">
                  <div class="company-name">MYRTILLE INDUSTRIES</div>
                  <div class="line-separator"></div>
                </div>
                <div class="letterhead-content" id="contentPreview">
                  Your document content will appear here
                </div>
                <div class="letterhead-bottom">
                  <div class="address-section">
                    <div class="section-title-line">REGISTERED ADDRESS</div>
                    <div>92 SURAJ NAGAR (E)</div>
                    <div>CIVIL LINES SODALA</div>
                    <div>JAIPUR (RAJ)</div>
                  </div>
                  <div class="contact-section">
                    <div class="section-title-line">CONTACT DETAILS</div>
                    <div>+91 9782099489</div>
                    <div>anilyadav.bme@gmail.com</div>
                    <div>GST: 08AMHPY5013C</div>
                    <div>URN-UDYAM-RJ-17-0084962</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="app-section" style="text-align: center; margin-top: 30px;">
          <button class="btn" id="generateBtn" style="padding: 16px 40px; font-size: 20px;">
            <i class="fas fa-file-pdf"></i> Generate PDF
          </button>
          
          <div class="status-area" id="statusArea">
            <div class="status-header">
              <i class="fas fa-cog fa-spin"></i>
              <h3>Generating your document...</h3>
            </div>
            <div class="progress-container">
              <div class="progress-bar" id="progressBar"></div>
            </div>
            <div class="status-message" id="statusMessage">Preparing PDF...</div>
          </div>
          
          <div class="success-message" id="successMessage">
            <i class="fas fa-check-circle"></i> Document generated successfully! Check your downloads.
          </div>
          
          <div class="error-message" id="errorMessage">
            <i class="fas fa-exclamation-circle"></i> <span id="errorText">Error generating document</span>
          </div>
        </div>
      </div>
      
      <div class="footer">
        <p>Myrtille Industries &copy; 2023 | Professional Document Solutions</p>
      </div>
    </div>
  </div>
  
  <div class="notification" id="notification">
    <i class="fas fa-check-circle"></i> Text copied to clipboard!
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const contentInput = document.getElementById('contentInput');
      const generateBtn = document.getElementById('generateBtn');
      const copyBtn = document.getElementById('copyBtn');
      const clearBtn = document.getElementById('clearBtn');
      const statusArea = document.getElementById('statusArea');
      const progressBar = document.getElementById('progressBar');
      const statusMessage = document.getElementById('statusMessage');
      const contentPreview = document.getElementById('contentPreview');
      const successMessage = document.getElementById('successMessage');
      const errorMessage = document.getElementById('errorMessage');
      const errorText = document.getElementById('errorText');
      const charCount = document.getElementById('charCount');
      const notification = document.getElementById('notification');
      
      // Initialize with sample content
      updatePreview();
      charCount.textContent = `${contentInput.value.length} characters`;
      
      // Update preview as user types
      contentInput.addEventListener('input', updatePreview);
      
      function updatePreview() {
        const content = contentInput.value;
        contentPreview.textContent = content || "Your document content will appear here";
        charCount.textContent = `${content.length} characters`;
      }
      
      // Copy text to clipboard
      copyBtn.addEventListener('click', () => {
        contentInput.select();
        document.execCommand('copy');
        
        // Show notification
        notification.classList.add('show');
        setTimeout(() => {
          notification.classList.remove('show');
        }, 2000);
      });
      
      // Clear text area
      clearBtn.addEventListener('click', () => {
        contentInput.value = '';
        updatePreview();
      });
      
      // Generate PDF
      generateBtn.addEventListener('click', generatePDF);
      
      async function generatePDF() {
        const content = contentInput.value.trim();
        
        if (!content) {
          showError("Please enter some content before generating");
          return;
        }
        
        // Reset messages
        successMessage.style.display = 'none';
        errorMessage.style.display = 'none';
        statusArea.classList.add('active');
        statusMessage.textContent = "Creating PDF document...";
        progressBar.style.width = "10%";
        
        try {
          const finalPdf = await PDFLib.PDFDocument.create();
          
          // Embed fonts
          const helveticaFont = await finalPdf.embedFont(PDFLib.StandardFonts.Helvetica);
          const helveticaBoldFont = await finalPdf.embedFont(PDFLib.StandardFonts.HelveticaBold);
          
          // Standard A4 dimensions in points (portrait)
          const a4Width = 595.28;
          const a4Height = 841.89;
          
          // Content area dimensions
          const contentAreaWidth = a4Width - 80; // 40 left + 40 right margin
          const contentAreaHeight = a4Height - 75 - 100 - 40; // 75 header + 100 footer + 20 top + 20 bottom margin
          
          // Split content into pages
          const lines = splitTextIntoLines(content, helveticaFont, 12, contentAreaWidth);
          const pages = groupLinesIntoPages(lines, helveticaFont, 12, contentAreaHeight);
          
          for (let pageIndex = 0; pageIndex < pages.length; pageIndex++) {
            const progress = 10 + (pageIndex / pages.length * 80);
            progressBar.style.width = `${progress}%`;
            statusMessage.textContent = `Generating page ${pageIndex + 1} of ${pages.length}...`;
            
            // Create new page
            const newPage = finalPdf.addPage([a4Width, a4Height]);
            
            // Draw top letterhead
            newPage.drawRectangle({
              x: 0,
              y: a4Height - 75,
              width: a4Width,
              height: 75,
              color: PDFLib.rgb(1, 1, 1),
              borderWidth: 0,
            });
            
            const companyName = "MYRTILLE INDUSTRIES";
            const textWidth = helveticaBoldFont.widthOfTextAtSize(companyName, 24);
            newPage.drawText(companyName, {
              x: a4Width/2 - textWidth/2,
              y: a4Height - 45,
              size: 24,
              color: PDFLib.rgb(0, 0, 0),
              font: helveticaBoldFont,
            });
            
            // Draw top line below company name
            newPage.drawLine({
              start: { x: 40, y: a4Height - 75 },
              end: { x: a4Width - 40, y: a4Height - 75 },
              thickness: 1,
              color: PDFLib.rgb(0.8, 0.8, 0.8),
            });
            
            // Draw bottom letterhead
            newPage.drawRectangle({
              x: 0,
              y: 0,
              width: a4Width,
              height: 100,
              color: PDFLib.rgb(1, 1, 1),
              borderWidth: 0,
            });
            
            // Draw top line above address details
            newPage.drawLine({
              start: { x: 40, y: 100 },
              end: { x: a4Width - 40, y: 100 },
              thickness: 1,
              color: PDFLib.rgb(0.8, 0.8, 0.8),
            });
            
            // Draw address details
            const addressLines = [
              "92 SURAJ NAGAR (E)",
              "CIVIL LINES SODALA",
              "JAIPUR (RAJ)"
            ];
            
            let yPos = 85;
            addressLines.forEach(line => {
              newPage.drawText(line, {
                x: 40,
                y: yPos,
                size: 10,
                color: PDFLib.rgb(0.102, 0.322, 0.463),
                font: helveticaFont,
              });
              yPos -= 14;
            });
            
            // Draw contact details
            const contactLines = [
              "+91 9782099489",
              "anilyadav.bme@gmail.com",
              "GST: 08AMHPY5013C",
              "URN-UDYAM-RJ-17-0084962"
            ];
            
            yPos = 85;
            contactLines.forEach(line => {
              newPage.drawText(line, {
                x: a4Width - 180,
                y: yPos,
                size: 10,
                color: PDFLib.rgb(0.102, 0.322, 0.463),
                font: helveticaFont,
              });
              yPos -= 14;
            });
            
            // Draw content
            const pageLines = pages[pageIndex];
            let contentY = a4Height - 75 - 20; // Start below header
            
            for (const line of pageLines) {
              newPage.drawText(line, {
                x: 40,
                y: contentY,
                size: 12,
                color: PDFLib.rgb(0.2, 0.2, 0.2),
                font: helveticaFont,
              });
              contentY -= 15; // Line height
            }
          }
          
          statusMessage.textContent = "Finalizing document...";
          progressBar.style.width = "95%";
          
          const finalPdfBytes = await finalPdf.save();
          const blob = new Blob([finalPdfBytes], { type: 'application/pdf' });
          saveAs(blob, "Myrtille_Industries_Document.pdf");
          
          statusMessage.textContent = "Document generated successfully!";
          progressBar.style.width = "100%";
          progressBar.style.background = "#27ae60";
          
          setTimeout(() => {
            statusArea.classList.remove('active');
            successMessage.style.display = 'block';
            progressBar.style.background = "linear-gradient(90deg, #3498db, #2980b9)";
            progressBar.style.width = "0%";
            
            // Reset after 5 seconds
            setTimeout(() => {
              successMessage.style.display = 'none';
            }, 5000);
          }, 2000);
          
        } catch (error) {
          console.error('Error:', error);
          showError(`Error generating PDF: ${error.message}`);
        }
      }
      
      // Split text into lines that fit within the content width
      function splitTextIntoLines(text, font, fontSize, maxWidth) {
        const words = text.replace(/\n/g, ' \n ').split(' ');
        const lines = [];
        let currentLine = '';
        
        for (let i = 0; i < words.length; i++) {
          const word = words[i];
          
          if (word === '\n') {
            lines.push(currentLine.trim());
            currentLine = '';
            continue;
          }
          
          const testLine = currentLine ? `${currentLine} ${word}` : word;
          const testWidth = font.widthOfTextAtSize(testLine, fontSize);
          
          if (testWidth <= maxWidth) {
            currentLine = testLine;
          } else {
            if (currentLine) {
              lines.push(currentLine.trim());
            }
            currentLine = word;
          }
        }
        
        if (currentLine) {
          lines.push(currentLine.trim());
        }
        
        return lines;
      }
      
      // Group lines into pages based on content height
      function groupLinesIntoPages(lines, font, fontSize, maxHeight) {
        const lineHeight = 15; // Approximate line height
        const maxLinesPerPage = Math.floor(maxHeight / lineHeight);
        
        const pages = [];
        let currentPage = [];
        
        for (const line of lines) {
          if (currentPage.length < maxLinesPerPage) {
            currentPage.push(line);
          } else {
            pages.push([...currentPage]);
            currentPage = [line];
          }
        }
        
        if (currentPage.length > 0) {
          pages.push(currentPage);
        }
        
        return pages;
      }
      
      function showError(message) {
        errorText.textContent = message;
        errorMessage.style.display = 'block';
        statusArea.classList.add('active');
        statusMessage.textContent = message;
        progressBar.style.background = "#e74c3c";
        progressBar.style.width = "100%";
        
        setTimeout(() => {
          statusArea.classList.remove('active');
          progressBar.style.background = "linear-gradient(90deg, #3498db, #2980b9)";
          progressBar.style.width = "0%";
        }, 5000);
      }
    });
  </script>
</body>
</html>
